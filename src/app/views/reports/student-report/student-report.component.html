<mat-tab-group (selectedTabChange)="onTabChanged($event)" style="padding: 0 20px;">

  <mat-tab label="QuickView">
    <ng-template mat-tab-label>
      <mat-icon class="example-tab-icon">bar_chart</mat-icon>
      Quick View
    </ng-template>
    <div class="tab-body">
      <app-student-assignment-stats-charts
      [reportData]="assignmentChartData"
    ></app-student-assignment-stats-charts>
    </div>
  </mat-tab>

  <mat-tab label="Questions">
    <ng-template mat-tab-label>
      <mat-icon class="example-tab-icon">question_answer</mat-icon>
      Solution
    </ng-template>
    <mat-tab-group>
      <mat-tab
        *ngFor="let section of fetchedWholeAssignmentResult?.sections"
        [label]="section.sectionName"
      >
        <div
          *ngFor="
            let answer of section.answers
              | filterPipe: currentSolutionSelection;
            let i = index
          "
          class="question-card"
        >
          <div style="display: flex; margin-bottom: 20px">
            <div class="numberCircle">{{ i + 1 }}</div>
            <div
              class="questionName"
              [innerHtml]="transform(answer.name)"
            ></div>
            <div
              style="
                position: absolute;
                right: 30px;
                border-radius: 20px;
                box-shadow: 0 2px 5px 0 rgb(0 0 0 / 16%),
                  0 2px 10px 0 rgb(0 0 0 / 12%);
              "
            >
              <mat-chip-list aria-label="Fish selection">
                <mat-chip
                  [ngClass]="{
                    'success-bg': answer.answerStatus == 'CORRECT',
                    'failure-bg': answer.answerStatus == 'INCORRECT',
                    'warning-bg': answer.answerStatus == 'SKIPPED'
                  }"
                  selected
                >
                  <i
                    class="fas fa-hourglass-half"
                    style="margin-right: 5px"
                  ></i>
                  {{ answer.timeElapsedInSec }} sec</mat-chip
                >
              </mat-chip-list>
            </div>
          </div>

          <div style="margin-left: 30px">
            <div
              class="option"
              [ngClass]="{
                correct: answer.correctOptions?.includes(option.key),
                selected: answer.selectedOptions?.includes(option.key),
                wrong: !answer.correctOptions?.includes(option.key)
              }"
              *ngFor="let option of answer.inputOptions"
            >
              <div class="markcontainer">
                <i
                  *ngIf="
                    answer.answerStatus == 'CORRECT' &&
                    answer.correctOptions.includes(option.key)
                  "
                  class="fas fa-check-circle success"
                ></i>
                <i
                  *ngIf="
                    answer.answerStatus == 'INCORRECT' &&
                    answer.selectedOptions.includes(option.key)
                  "
                  class="fas fa-times-circle failure"
                ></i>
              </div>
              <div
                class="answer-list"
                [innerHtml]="transform(option.value)"
              ></div>
              <!-- <mat-chip-list *ngIf="answer.correctOptions?.includes(option.key)" aria-label="Correct Answer">
                <mat-chip class="primary-bg" selected>
                   Correct Answer</mat-chip>
              </mat-chip-list> -->
              <span
                *ngIf="answer.correctOptions?.includes(option.key)"
                class="badge badge-pill badge-primary ml-2"
                >Correct Answer</span
              >
            </div>
          </div>

          <div *ngIf="answer.type == 'TITA'" style="margin-left: 30px">
            <div class="option correct">
              <div [innerHtml]="transform(answer.correctAnswerText)"></div>
            </div>
            <div
              class="option"
              [ngClass]="{
                correct: answer.answerStatus == 'CORRECT',
                wrong: answer.answerStatus == 'INCORRECT'
              }"
            >
              <div [innerHtml]="transform(answer.answerText)"></div>
            </div>
          </div>
          <mat-divider></mat-divider>
          <div style="margin: 20px 30px">
            <div style="margin-bottom: 10px">Explanation</div>
            <div [innerHtml]="transform(answer.explanation)" disabled>
              Explanation
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </mat-tab>

  <mat-tab label="Ranking">
    <div class="mat-elevation-z8">
      <div>
        <table
          mat-table
          [dataSource]="dataSource"
          matSort
          matSortActive="name"
          matSortDisableClear
        >
          <ng-container matColumnDef="name">
            <th
              class="custom-mat-header-th"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
            >
              <div>Name</div>
            </th>
            <td mat-cell *matCellDef="let row">{{ row.name }}</td>
          </ng-container>

          <ng-container matColumnDef="totalMarks">
            <th
              class="custom-mat-header-th"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
            >
              Total Mark
            </th>
            <td mat-cell *matCellDef="let row">{{ row.totalMarks }}</td>
          </ng-container>

          <ng-container matColumnDef="marksReceived">
            <th
              class="custom-mat-header-th"
              mat-header-cell
              *matHeaderCellDef
              mat-sort-header
            >
              Mark Recieved
            </th>
            <td mat-cell *matCellDef="let row">{{ row.marksReceived }}</td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="rankingDisplayedColumn"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: rankingDisplayedColumn"
          ></tr>
        </table>
      </div>
    </div>
  </mat-tab>
</mat-tab-group>

<!-- <div style="position: relative; height: 50px">
  <div style="margin: 0px 20px; display: inline-block">
    <mat-button-toggle-group
      #filterToggle="matButtonToggleGroup"
      (change)="showFilteredData($event.value)"
      [value]="currentSelection"
      aria-label="Change Filter"
    >
      <mat-button-toggle
        *ngFor="let filterItem of filterList"
        [value]="filterItem"
      >
        {{ filterItem }}
      </mat-button-toggle>
    </mat-button-toggle-group>
  </div> -->

<!-- <div
    *ngIf="currentSelection == 'Solution'"
    style="
      margin: 0px 20px;

      position: absolute;
      display: inline-block;
      right: 0;
    "
  >
    <mat-button-toggle-group
      #solutionfilterToggle="matButtonToggleGroup"
      [value]="currentSolutionSelection"
      aria-label="Change Filter"
    >
      <mat-button-toggle
        (click)="changeSolutionFilter(filter)"
        *ngFor="let filter of solutionFilter"
        [value]="filter"
      >
        {{ filter }}
      </mat-button-toggle>
    </mat-button-toggle-group>
  </div>
</div> -->

<!-- <container-element [ngSwitch]="currentSelection">
  <div *ngSwitchDefault class="student-report-list-grid">
    <div class="mat-elevation-z8">
      <div class="loading-container" *ngIf="isLoading">
        <mat-spinner *ngIf="isLoading"></mat-spinner>
      </div>
      <div class="mat-elevation-z8">
        <div>
          <table
            mat-table
            [dataSource]="dataSource"
            matSort
            matSortActive="name"
            matSortDisableClear
          >
            <ng-container matColumnDef="name">
              <th
                class="custom-mat-header-th"
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
              >
                <div>Name</div>
              </th>
              <td mat-cell *matCellDef="let row">{{ row.name }}</td>
              <td mat-footer-cell *matFooterCellDef class="footer-stye">
                Total
              </td>
            </ng-container>

            <ng-container matColumnDef="questions">
              <th
                class="custom-mat-header-th"
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
              >
                Questions
              </th>
              <td mat-cell *matCellDef="let row">{{ row.questions }}</td>
              <td mat-footer-cell *matFooterCellDef class="footer-stye">
                {{ getTotal("questions") }}
              </td>
            </ng-container>

            <ng-container matColumnDef="timeTaken">
              <th
                class="custom-mat-header-th"
                mat-header-cell
                *matHeaderCellDef
              >
                Time Taken (in min)
              </th>
              <td mat-cell *matCellDef="let row">
                {{ row.timeTaken | minuteSeconds }}
              </td>
              <td mat-footer-cell *matFooterCellDef class="footer-stye">
                {{ getTotal("timeTaken") | minuteSeconds }}
              </td>
            </ng-container>

            <ng-container matColumnDef="attempt">
              <th
                class="custom-mat-header-th"
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
              >
                Attempt
              </th>
              <td mat-cell *matCellDef="let row">{{ row.attempt }}</td>
              <td mat-footer-cell *matFooterCellDef class="footer-stye">
                {{ getTotal("attempt") }}
              </td>
            </ng-container>

            <ng-container matColumnDef="incorrect">
              <th
                class="custom-mat-header-th"
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
              >
                Incorrect
              </th>
              <td mat-cell *matCellDef="let row">{{ row.incorrect }}</td>
              <td mat-footer-cell *matFooterCellDef class="footer-stye">
                {{ getTotal("incorrect") }}
              </td>
            </ng-container>

            <ng-container matColumnDef="skipped">
              <th
                class="custom-mat-header-th"
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
              >
                Skipped
              </th>
              <td mat-cell *matCellDef="let row">{{ row.skipped }}</td>
              <td mat-footer-cell *matFooterCellDef class="footer-stye">
                {{ getTotal("skipped") }}
              </td>
            </ng-container>

            <ng-container matColumnDef="score">
              <th
                class="custom-mat-header-th"
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
              >
                Score
              </th>
              <td mat-cell *matCellDef="let row">{{ row.score }}</td>
              <td mat-footer-cell *matFooterCellDef class="footer-stye">
                {{ getTotal("score") }}
              </td>
            </ng-container>

            <ng-container matColumnDef="correct">
              <th
                class="custom-mat-header-th"
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
              >
                Correct
              </th>
              <td mat-cell *matCellDef="let row">{{ row.correct }}</td>
              <td mat-footer-cell *matFooterCellDef class="footer-stye">
                {{ getTotal("correct") }}
              </td>
            </ng-container>

            <ng-container matColumnDef="accuracy">
              <th
                class="custom-mat-header-th"
                mat-header-cell
                *matHeaderCellDef
                mat-sort-header
              >
                Accuracy %
              </th>
              <td mat-cell *matCellDef="let row">{{ row.accuracy }}</td>
              <td mat-footer-cell *matFooterCellDef class="footer-stye">
                {{ getTotal("accuracy") }}
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</container-element> -->
